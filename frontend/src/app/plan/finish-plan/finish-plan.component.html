<div class="container">
    <button nz-button [nzType]="'primary'" (click)="showModal()"
        style="margin-left: 10px;margin-top: 10px;"><span>提交</span></button>
    <nz-table nzTableLayout="fixed" style="margin: 10px" #filterTable [nzData]="plansDisplay">
        <thead>
            <tr>
                <th style="background-color: #ffffff;">完成</th>
                <th style="background-color: #ffffff;">ID</th>
                <th style="background-color: #ffffff;" [nzFilters]="[
                { text: '出库', value: 'Outbound' },
                { text: '入库', value: 'Inbound'},]" [nzFilterFn]="filterInOut">出/入库</th>
                <th style="background-color: #ffffff;">货物ID</th>

                <th nzCustomFilter style="background-color: #ffffff;">
                    货物名称
                    <nz-filter-trigger [(nzVisible)]="visible" [nzActive]="searchValue.length > 0"
                        [nzDropdownMenu]="menu">
                        <i nz-icon nzType="search"></i>
                    </nz-filter-trigger>
                </th>
                <th style="background-color: #ffffff;">货物规格</th>
                <th style="background-color: #ffffff;">货物生产商</th>
                <th style="background-color: #ffffff;">计划数量</th>
                <th style="background-color: #ffffff;">计划时间</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let plan of filterTable.data"
                [ngClass]="{'inbound-row': plan.plan.inOrOutbound === 'Inbound', 'outbound-row': plan.plan.inOrOutbound === 'Outbound'}">
                <td><input type="checkbox" [(ngModel)]="plan.selected" /></td>
                <td>{{ plan.plan.planID }}</td>
                <td>{{ plan.plan.inOrOutbound | inOrOutboundPipe}}</td>
                <td>{{ plan.plan.planGoodsID }}</td>
                <td>{{ plan.goodsName }}</td>
                <td>{{ plan.goodsSpecification }}</td>
                <td>{{ plan.goodsManufacturer }}</td>
                <td>{{ plan.plan.planExpectedAmount }}</td>
                <td>{{ plan.plan.planExpectedTime | date:'yyyy-MM-dd HH:mm':'UTC'}}</td>
            </tr>
        </tbody>
    </nz-table>

    <nz-modal [(nzVisible)]="confirmVisible" nzTitle="请确认完成计划信息！" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
        <ng-container *nzModalContent>
            <div *ngFor="let plan of plansSubmit; let last = last">
                <p>计划ID：{{plan.plan.planID}}</p>
                <p>出/入库：{{ plan.plan.inOrOutbound | inOrOutboundPipe }}</p>
                <p>货物名称：{{ plan.goodsName }}</p>
                <p>货物规格：{{ plan.goodsSpecification }}</p>
                <p>计划数量：{{ plan.plan.planExpectedAmount }}</p>
                <p>计划日期：{{ plan.plan.planExpectedTime | date: 'yyyy-MM-dd HH:mm' }}</p>
                <hr *ngIf="!last">
            </div>
        </ng-container>
    </nz-modal>

    <nz-dropdown-menu #menu="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
            <div class="search-box">
                <input type="text" nz-input placeholder="搜索名称" [(ngModel)]="searchValue" />
                <button nz-button nzSize="small" nzType="primary" (click)="search()" class="search-button">搜索</button>
                <button nz-button nzSize="small" (click)="reset()">重置</button>
            </div>
        </div>
    </nz-dropdown-menu>
</div>

<router-outlet></router-outlet>